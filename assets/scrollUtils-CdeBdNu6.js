import{M as s,S as h,a as u}from"./utils-DzzOqrFt.js";const w=["Nd","Pon","Wt","Åšr","Czw","Pt","Sob"];function A(t){const n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function O(t,n){const e=new Date(t,n+1,0).getDate(),o=[];for(let a=1;a<=e;a++)o.push({date:new Date(t,n,a),dayShift1:null,dayShift2:null,nightShift1:null,nightShift2:null,dayShift1Name:s.NOT_ASSIGNED,dayShift2Name:s.NOT_ASSIGNED,nightShift1Name:s.NOT_ASSIGNED,nightShift2Name:s.NOT_ASSIGNED,isCurrentMonth:!0});return o}function g(t,n){const e=n.find(o=>o.id===t);return e?{name:e.name,isRatownik:e.ratownik}:{name:s.NOT_ASSIGNED,isRatownik:!1}}function _(t){const n=t.date.toDateString(),e={dayShift1:t.dayShift1,dayShift2:t.dayShift2,nightShift1:t.nightShift1,nightShift2:t.nightShift2};sessionStorage.setItem(n,JSON.stringify(e))}function d(t,n,e,o,a){const i=new Date(t,n,e).toDateString(),l=sessionStorage.getItem(i);if(l)try{const S=JSON.parse(l),f=o.find(r=>r.date.toDateString()===i);f&&h.forEach(r=>{f[r]=S[r];const c=g(f[r],a);f[r+"Name"]=c.name,f[r+"Ratownik"]=c.isRatownik,f[r+"UserChanged"]=S[r+"UserChanged"]??!1})}catch(S){console.error("Failed to load local data:",S)}}function k(t,n,e,o){for(let i=1;i<=31;i++)d(t,n,i,e,o)}function C(){const t=[];for(const n in sessionStorage)if(sessionStorage.hasOwnProperty(n))try{const e=JSON.parse(sessionStorage.getItem(n)||"{}");h.some(a=>e[a+"UserChanged"])&&t.push(n)}catch{continue}t.forEach(n=>sessionStorage.removeItem(n))}function E(t,n,e,o){return m(t,n,e.id)?e.ratownik&&N(t,n,o)?(u(s.TWO_RATOWNIK_ERROR,"red"),!1):!0:(u(s.DUPLICATE_SHIFT,"red"),!1)}function m(t,n,e){return n.includes("day")?t.dayShift1!==e&&t.dayShift2!==e:n.includes("night")?t.nightShift1!==e&&t.nightShift2!==e:!0}function N(t,n,e){let o=[];return n.includes("day")&&(o=[t.dayShift1,t.dayShift2].filter(Boolean)),n.includes("night")&&(o=[t.nightShift1,t.nightShift2].filter(Boolean)),o.some(a=>!!e.find(l=>l.id===a)?.ratownik)}function I(t,n,e){t[n]=e.id,t[`${n}Name`]=e.name,t[`${n}Ratownik`]=e.ratownik,t[`${n}UserChanged`]=!0}function R(t,n){t[n]=null,t[`${n}Name`]=s.NOT_ASSIGNED,t[`${n}Ratownik`]=null,t[`${n}UserChanged`]=!0}function M(t,n){if(!n)return;t.preventDefault();const e=t.deltaY;n.scrollLeft+=e}function P(t,n,e,o){if(!t)return;const a=new Date;if(a.getMonth()!==n||a.getFullYear()!==e)return;const i=document.querySelector(".day-cell, .calendar-table td")?.offsetWidth||0,l=t.offsetWidth,S=i*o-l/2+i/2;t.scrollTo({left:Math.max(0,S),behavior:"smooth"})}export{I as a,P as b,C as c,w as d,R as e,O as g,M as h,A as i,k as l,_ as s,E as v};
