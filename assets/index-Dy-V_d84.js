const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exceljs.min-rgIH9GXZ.js","assets/_commonjsHelpers-Cpj98o6Y.js","assets/PeopleListWindow-DvqmhoKp.js","assets/utils-oyCVUgbq.js","assets/vue-vendor-DhtqVHvN.js","assets/utils-DPnYpszc.css","assets/PeopleListWindow-DLDKi6TV.css","assets/ShiftCountWindow-DeOo7D4t.js","assets/ShiftCountWindow-CuA0xAoS.css","assets/AuthorizationModal-DTnq-K36.js","assets/AuthorizationModal-Cx-L6xD7.css","assets/CalendarComponent-DUyu9_za.js","assets/scrollUtils-CEn1ByBB.js","assets/CalendarComponent-BGR-G1n7.css","assets/ExcelComponent-DGZJL5KH.js","assets/ExcelComponent-B4vpiCIL.css"])))=>i.map(i=>d[i]);
import{e as j,c as f,o as p,d as a,b as T,t as b,f as N,g as k,n as x,w as z,F as O,a as U,h as M,i as v,m as Q,j as V,v as W,k as F,l as L,p as H,q as ee,s as G,u as te}from"./vue-vendor-DhtqVHvN.js";import{M as C,_ as P,a as y,c as ne}from"./utils-oyCVUgbq.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const oe="modulepreload",se=function(e){return"/"+e},Y={},_=function(t,n,i){let s=Promise.resolve();if(n&&n.length>0){let r=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=r(n.map(h=>{if(h=se(h),h in Y)return;Y[h]=!0;const m=h.endsWith(".css"),E=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${E}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":oe,m||(c.as="script"),c.crossOrigin="",c.href=h,u&&c.setAttribute("nonce",u),document.head.appendChild(c),m)return new Promise((D,d)=>{c.addEventListener("load",D),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return s.then(r=>{for(const l of r||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},ie=j({name:"ButtonSwitchView",props:{currentComponent:{type:String,required:!0,validator:e=>["CalendarComponent","ExcelComponent"].includes(e)}},data(){return{MESSAGES:C}}}),re=["title","aria-label"],ae=["title","aria-label"];function le(e,t,n,i,s,o){return e.currentComponent==="ExcelComponent"?(p(),f("button",{key:0,onClick:t[0]||(t[0]=r=>e.$emit("navigate","CalendarComponent")),class:"switch-view-button",title:e.MESSAGES.VIEW_SWITCH_TO_CALENDAR,"aria-label":e.MESSAGES.VIEW_SWITCH_TO_CALENDAR},[t[2]||(t[2]=a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor","stroke-width":"3"},[a("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),a("line",{x1:"9",y1:"4",x2:"9",y2:"22"})],-1)),T(" "+b(e.MESSAGES.VIEW_CALENDAR_TEXT),1)],8,re)):(p(),f("button",{key:1,onClick:t[1]||(t[1]=r=>e.$emit("navigate","ExcelComponent")),class:"switch-view-button",title:e.MESSAGES.VIEW_SWITCH_TO_TABLE,"aria-label":e.MESSAGES.VIEW_SWITCH_TO_TABLE},[t[3]||(t[3]=N('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="3" data-v-d19d8b04><rect x="3" y="3" width="18" height="18" rx="2" data-v-d19d8b04></rect><line x1="3" y1="9" x2="21" y2="9" data-v-d19d8b04></line><line x1="3" y1="15" x2="21" y2="15" data-v-d19d8b04></line><line x1="9" y1="3" x2="9" y2="21" data-v-d19d8b04></line><line x1="15" y1="3" x2="15" y2="21" data-v-d19d8b04></line></svg>',1)),T(" "+b(e.MESSAGES.VIEW_TABLE_TEXT),1)],8,ae))}const X=P(ie,[["render",le],["__scopeId","data-v-d19d8b04"]]),de={name:"PencilIcon",props:{isEditing:{type:Boolean,required:!0}}},he=["aria-checked"],ce={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"pencil-icon"},ue={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round",class:"pencil-icon"};function pe(e,t,n,i,s,o){return p(),f("span",{class:"slider",role:"switch","aria-checked":n.isEditing},[n.isEditing?(p(),f("svg",ue,t[1]||(t[1]=[a("path",{d:"M12 20h9"},null,-1),a("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},null,-1)]))):(p(),f("svg",ce,t[0]||(t[0]=[a("path",{d:"M12 20h9"},null,-1),a("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},null,-1)])))],8,he)}const q=P(de,[["render",pe]]),me={},ge={class:"refresh-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"};function fe(e,t){return p(),f("svg",ge,t[0]||(t[0]=[a("path",{d:"M23 4v6h-6"},null,-1),a("path",{d:"M1 20v-6h6"},null,-1),a("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10"},null,-1),a("path",{d:"M20.49 15a9 9 0 0 1-14.85 3.36L1 14"},null,-1)]))}const K=P(me,[["render",fe],["__scopeId","data-v-11885e2d"]]);function Ee(e){const t=[{date:new Date(e,0,1),name:"Nowy Rok"},{date:new Date(e,0,6),name:"Święto Trzech Króli"},{date:new Date(e,4,1),name:"Święto Pracy"},{date:new Date(e,4,3),name:"Święto Konstytucji 3 Maja"},{date:new Date(e,7,15),name:"Wniebowzięcie Najświętszej Maryi Panny"},{date:new Date(e,10,1),name:"Wszystkich Świętych"},{date:new Date(e,10,11),name:"Święto Niepodległości"},{date:new Date(e,11,25),name:"Boże Narodzenie (pierwszy dzień)"},{date:new Date(e,11,26),name:"Boże Narodzenie (drugi dzień)"}],n=we(e);t.push({date:n,name:"Wielkanoc"});const i=new Date(n);i.setDate(n.getDate()+1),t.push({date:i,name:"Poniedziałek Wielkanocny"});const s=new Date(n);s.setDate(n.getDate()+49),t.push({date:s,name:"Zielone Świątki"});const o=new Date(n);return o.setDate(n.getDate()+60),t.push({date:o,name:"Boże Ciało"}),t}function we(e){const t=e%19,n=Math.floor(e/100),i=e%100,s=Math.floor(n/4),o=n%4,r=Math.floor((n+8)/25),l=Math.floor((n-r+1)/3),u=(19*t+n-s-l+15)%30,h=Math.floor(i/4),m=i%4,E=(32+2*o+2*h-u-m)%7,c=Math.floor((t+11*u+22*E)/451),D=Math.floor((u+E-7*c+114)/31)-1,d=(u+E-7*c+114)%31+1;return new Date(e,D,d)}function A(e){const t=Ee(e.getFullYear()),n=e.toDateString();for(const i of t)if(i.date.toDateString()===n)return{isHoliday:!0,name:i.name};return{isHoliday:!1}}const ye=e=>["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"][e],Se=e=>{let t=e,n="",i;for(;t>0;)i=(t-1)%26,n=String.fromCharCode(65+i)+n,t=Math.floor((t-i)/26);return n},Me=(e,t,n=`
`)=>{const i=t.toDateString(),s=sessionStorage.getItem(i);if(s){const o=JSON.parse(s),r=[];return(o?.dayShift1===e||o?.dayShift2===e)&&r.push("D"),(o?.nightShift1===e||o?.nightShift2===e)&&r.push("N"),r.join(n)}return""},Ce=e=>{const t=e.getDay();return t===0||t===6?!0:A(e).isHoliday},ve=(e,t)=>{const n=document.createElement("a"),i=URL.createObjectURL(e);n.setAttribute("href",i),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)},be=e=>{let t="";const n=new Uint8Array(e);for(let i=0;i<n.byteLength;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)},De={name:"ButtonExport",props:{people:{type:Array,required:!0},monthDays:{type:Array,required:!0},selectedMonth:{type:Number,required:!0},selectedYear:{type:Number,required:!0},currentPage:{type:String,default:"ExcelComponent"}},data(){return{showExportMenu:!1,isMobileView:!1,MESSAGES:C}},mounted(){document.addEventListener("click",this.handleOutsideClick),this.checkMobileView(),window.addEventListener("resize",this.checkMobileView)},beforeUnmount(){document.removeEventListener("click",this.handleOutsideClick),window.removeEventListener("resize",this.checkMobileView)},methods:{toggleExportMenu(e){e.stopPropagation(),this.showExportMenu=!this.showExportMenu},handleOutsideClick(e){this.showExportMenu&&!e.target.closest(".export-container")&&(this.showExportMenu=!1)},getMonthName(){return ye(this.selectedMonth)},getFilename(e){return`${this.MESSAGES.EXPORT_FILENAME_PREFIX}${this.getMonthName()}_${this.selectedYear}.${e}`},exportToCsv(){let e="\uFEFF";e+="Imię";for(let n=1;n<=this.getDaysInMonth();n++)e+=`;${n}`;e+=`\r
`;for(const n of this.people){e+=`"${n.name}"`;for(let i=1;i<=this.getDaysInMonth();i++)e+=`;${this.getFormattedShift(n.id,i," ")||""}`;e+=`\r
`}const t=new Blob([e],{type:"text/csv;charset=utf-8"});ve(t,this.getFilename("csv")),this.showExportMenu=!1},async exportToPdf(){try{const{jsPDF:e}=await _(async()=>{const{jsPDF:d}=await import("./jspdf.es.min-DYVGzn1_.js").then(g=>g.j);return{jsPDF:d}},[]),{autoTable:t}=await _(async()=>{const{autoTable:d}=await import("./jspdf.plugin.autotable-BgrBGiiK.js");return{autoTable:d}},[]),n=new e({orientation:"landscape",unit:"mm",format:"a4"});try{const d=await fetch("/assets/fonts/IBMPlexMono-Regular.ttf");if(!d.ok)throw new Error("Font file not found");const g=await d.arrayBuffer();n.addFileToVFS("IBMPlexMono-Regular.ttf",be(g)),n.addFont("IBMPlexMono-Regular.ttf","IBMPlexMono","normal"),n.setFont("IBMPlexMono")}catch(d){console.warn("Could not load local font, using fallback",d),n.setFont("helvetica")}let i=n.internal.pageSize.getWidth();n.setFontSize(16),n.setTextColor(0,0,0);const s="IZBA PRZYJĘĆ DZIECIĘCA",o=n.getStringUnitWidth(s)*n.getFontSize()/n.internal.scaleFactor;n.text(s,(i-o)/2,15);const l="ROZKŁAD PRACY PRACOWNIKÓW KONTRAKTOWYCH - {0} {1}r.".replace("{0}",this.getMonthName()).replace("{1}",this.selectedYear),u=n.getStringUnitWidth(l)*n.getFontSize()/n.internal.scaleFactor;n.text(l,(i-u)/2,22);const h=["Imię"];for(let d=1;d<=this.getDaysInMonth();d++)h.push(d.toString());const m=this.people.map(d=>{const g=[d.name];for(let w=1;w<=this.getDaysInMonth();w++){const S=this.getFormattedShift(d.id,w,`
`);g.push(S||"")}return g});t(n,{head:[h],body:m,startY:30,theme:"grid",margin:{left:8},styles:{fontSize:8,cellPadding:3,font:"IBMPlexMono",fontStyle:"normal",lineWidth:.3,minCellHeight:8,halign:"center",cellWidth:"wrap",overflow:"linebreak"},columnStyles:{0:{cellWidth:24}},headStyles:{fillColor:[0,62,62],textColor:[255,255,255],fontSize:6},didParseCell:function(d){try{if(d.section==="head"&&d.row.index===0&&d.column.index>0){const g=parseInt(d.cell.raw.toString());if(!isNaN(g)){const w=new Date(this.selectedYear,this.selectedMonth,g),S=w.getDay(),I=S===6,R=S===0;A(w).isHoliday?(d.cell.styles.fillColor=[255,255,255],d.cell.styles.textColor=[204,0,0]):I?(d.cell.styles.fillColor=[0,153,0],d.cell.styles.textColor=[255,255,255]):R&&(d.cell.styles.fillColor=[204,0,0],d.cell.styles.textColor=[255,255,255])}}else if(d.section==="body"&&(d.row.index%2===1?d.cell.styles.fillColor=[240,240,240]:d.cell.styles.fillColor=[255,255,255],d.column.index>0)){const g=parseInt(d.cell.raw.toString());if(!isNaN(g)){const w=new Date(this.selectedYear,this.selectedMonth,g),S=w.getDay(),I=S===6,R=S===0;A(w).isHoliday?d.cell.styles.fillColor=[255,238,238]:(I||R)&&(d.cell.styles.fillColor=[235,235,235])}}}catch(g){console.error("Error in didParseCell:",g)}}.bind(this),didDrawCell:function(d){try{if(d.section==="head"&&d.row.index===0&&d.column.index>0){const g=parseInt(d.cell.raw.toString());if(!isNaN(g)){const w=new Date(this.selectedYear,this.selectedMonth,g);if(A(w).isHoliday){const{x:I,y:R,width:B}=d.cell;n.setFontSize(6),n.setTextColor(204,0,0),n.text("*",I+B-3,R+3),n.setFontSize(8),n.setTextColor(0,0,0)}}}}catch(g){console.error("Error in didDrawCell:",g)}}.bind(this)});const c=(n.lastAutoTable.finalY||150)+10;n.setFontSize(10),n.setTextColor(0,0,0),n.text(this.MESSAGES.EXPORT_LEGEND,14,c),n.text(this.MESSAGES.EXPORT_LEGEND_DAY_SHIFT,14,c+6),n.text(this.MESSAGES.EXPORT_LEGEND_NIGHT_SHIFT,14,c+12),n.text(this.MESSAGES.EXPORT_LEGEND_FULL_DAY_SHIFT,14,c+18);const D=[];for(let d=1;d<=this.getDaysInMonth();d++){const g=new Date(this.selectedYear,this.selectedMonth,d),w=A(g);w.isHoliday&&D.push({date:g,name:w.name})}D.length!=0&&(n.text(this.MESSAGES.EXPORT_HOLIDAYS_THIS_MONTH,14,c+28),D.forEach((d,g)=>{n.text(`${d.date.getDate()} - ${d.name}`,14,c+34+g*6)})),n.save(this.getFilename("pdf")),this.showExportMenu=!1,y(this.MESSAGES.EXPORT_PDF_SUCCESS,"green")}catch(e){console.error("Error exporting PDF:",e),y(this.MESSAGES.EXPORT_PDF_ERROR,"red")}},async exportToExcel(){try{const e=await _(()=>import("./exceljs.min-rgIH9GXZ.js").then(l=>l.e),__vite__mapDeps([0,1])),t=new e.Workbook,n=t.addWorksheet(`${this.getMonthName()} ${this.selectedYear}`),i=["Imię"];for(let l=1;l<=this.getDaysInMonth();l++)i.push(l.toString());n.addRow(i);const s=n.getRow(1).eachCell(l=>{l.fill={type:"pattern",pattern:"solid",fgColor:{argb:"003E3E"}},l.font={color:{argb:"FFFFFF"},bold:!0},l.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});this.people.forEach((l,u)=>{const h=[l.name];for(let E=1;E<=this.getDaysInMonth();E++)h.push(this.getFormattedShift(l.id,E," "));n.addRow(h);const m=u+2;m%2===0&&n.getRow(m).eachCell(E=>{E.fill={type:"pattern",pattern:"solid",fgColor:{argb:"F0F0F0"}}})});for(let l=1;l<=this.getDaysInMonth();l++){const u=new Date(this.selectedYear,this.selectedMonth,l),{isHoliday:h,name:m}=A(u),E=u.getDay(),c=E===6,D=E===0;if(c||D||h){const g=Se(l+1);for(let S=2;S<=this.people.length+1;S++){const I=n.getCell(`${g}${S}`);I.fill={type:"pattern",pattern:"solid",fgColor:{argb:h?"FFEEEE":"EEEEEE"}}}const w=n.getCell(`${g}1`);if(h){w.note=m;const S=w.value?.toString()||"";w.value=S+this.MESSAGES.EXPORT_EXCEL_HOLIDAY_INDICATOR,w.font={color:{argb:"FFCC0000"},bold:!0}}else c?(w.fill={type:"pattern",pattern:"solid",fgColor:{argb:"009900"}},w.font={color:{argb:"FFFFFF"},bold:!0}):D&&(w.fill={type:"pattern",pattern:"solid",fgColor:{argb:"CC0000"}},w.font={color:{argb:"FFFFFF"},bold:!0})}}n.columns.forEach(l=>{l.width=12}),n.getColumn(1).width=20,n.getColumn(1).alignment={horizontal:"left"};const o=await t.xlsx.writeBuffer(),r=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.downloadFile(r,this.getFilename("xlsx")),this.showExportMenu=!1,y(this.MESSAGES.EXPORT_EXCEL_SUCCESS,"green")}catch(e){console.error("Error exporting Excel:",e),y(this.MESSAGES.EXPORT_EXCEL_ERROR,"red")}},downloadFile(e,t){const n=document.createElement("a"),i=URL.createObjectURL(e);n.setAttribute("href",i),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)},getDaysInMonth(){return new Date(this.selectedYear,this.selectedMonth+1,0).getDate()},getFormattedShift(e,t,n=`
`){const i=new Date(this.selectedYear,this.selectedMonth,t);return Me(e,i,n)},isWeekendOrHoliday(e){const t=new Date(this.selectedYear,this.selectedMonth,e);return Ce(t)},checkMobileView(){this.isMobileView=window.innerWidth<=768}}},_e={class:"export-container"},ke=["title","aria-label"];function Pe(e,t,n,i,s,o){return p(),f("div",_e,[a("button",{class:x(["export-button top-right-buttons",{"excel-position":n.currentPage==="ExcelComponent","calendar-position":n.currentPage==="CalendarComponent"}]),onClick:t[0]||(t[0]=(...r)=>o.toggleExportMenu&&o.toggleExportMenu(...r)),title:s.MESSAGES.EXPORT_SCHEDULE_TITLE,"aria-label":s.MESSAGES.EXPORT_SCHEDULE_ARIA},t[4]||(t[4]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"export-icon"},[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)]),10,ke),s.showExportMenu?(p(),f("div",{key:0,class:x(["export-menu",[{"excel-position":n.currentPage==="ExcelComponent","calendar-position":n.currentPage==="CalendarComponent"},{"mobile-excel":n.currentPage==="ExcelComponent"&&s.isMobileView,"mobile-calendar":n.currentPage==="CalendarComponent"&&s.isMobileView}]])},[a("button",{onClick:t[1]||(t[1]=(...r)=>o.exportToCsv&&o.exportToCsv(...r)),class:"export-option"},[t[5]||(t[5]=N('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-db3f0195><path d="M14 3v4a1 1 0 0 0 1 1h4" data-v-db3f0195></path><path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z" data-v-db3f0195></path><path d="M9 17h6" data-v-db3f0195></path><path d="M9 13h6" data-v-db3f0195></path></svg>',1)),a("span",null,b(s.MESSAGES.EXPORT_FORMAT_CSV),1)]),a("button",{onClick:t[2]||(t[2]=(...r)=>o.exportToExcel&&o.exportToExcel(...r)),class:"export-option"},[t[6]||(t[6]=N('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="lightgreen" stroke-width="2" data-v-db3f0195><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-db3f0195></path><polyline points="14 2 14 8 20 8" data-v-db3f0195></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-db3f0195></line><line x1="16" y1="17" x2="8" y2="17" data-v-db3f0195></line><polyline points="10 9 9 9 8 9" data-v-db3f0195></polyline></svg>',1)),a("span",null,b(s.MESSAGES.EXPORT_FORMAT_EXCEL),1)]),a("button",{onClick:t[3]||(t[3]=(...r)=>o.exportToPdf&&o.exportToPdf(...r)),class:"export-option"},[t[7]||(t[7]=N('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="pink" stroke-width="2" data-v-db3f0195><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-db3f0195></path><polyline points="14 2 14 8 20 8" data-v-db3f0195></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-db3f0195></line><line x1="16" y1="17" x2="8" y2="17" data-v-db3f0195></line><polyline points="10 9 9 9 8 9" data-v-db3f0195></polyline></svg>',1)),a("span",null,b(s.MESSAGES.EXPORT_FORMAT_PDF),1)])],2)):k("",!0)])}const $=P(De,[["render",Pe],["__scopeId","data-v-db3f0195"]]),xe={name:"ButtonImport",props:{isEditingMode:{type:Boolean,required:!0},people:{type:Array,required:!0},monthDays:{type:Array,required:!0}},emits:["has-changes","cells-imported"],data(){return{showModal:!1,pastedData:"",parsedData:[],daysMismatch:!1,importedCells:new Set,isDragging:!1}},computed:{daysInMonth(){return this.monthDays.length}},mounted(){this.$nextTick(()=>{this.$refs.dropZone&&this.$refs.dropZone.focus()}),window.addEventListener("paste",this.handleGlobalPaste)},beforeUnmount(){window.removeEventListener("paste",this.handleGlobalPaste)},methods:{showImportModal(){this.showModal=!0,this.resetImport(),this.$nextTick(()=>{this.$refs.dropZone&&this.$refs.dropZone.focus()})},closeImportModal(){this.showModal=!1},resetImport(){this.pastedData="",this.parsedData=[],this.importedCells.clear()},triggerFileInput(){this.$refs.fileInput&&this.$refs.fileInput.click()},onDragOver(e){this.isDragging=!0,e.dataTransfer.dropEffect="copy"},onDragLeave(){this.isDragging=!1},onDrop(e){this.isDragging=!1;const t=e.dataTransfer.files;if(t.length>0)this.handleFileData(t[0]);else{const n=e.dataTransfer.getData("text/html");if(n)this.processHtmlTable(n);else{const i=e.dataTransfer.getData("text/plain");i&&(this.pastedData=i,this.parseImportedData())}}},onPaste(e){const t=e.clipboardData||window.clipboardData,n=t.getData("text/html");if(n){this.processHtmlTable(n);return}const i=t.getData("text/plain");i&&(this.pastedData=i,this.parseImportedData())},handleGlobalPaste(e){this.showModal&&this.onPaste(e)},processHtmlTable(e){try{const i=new DOMParser().parseFromString(e,"text/html").querySelectorAll("table");if(i.length>0){const o=i[0].querySelectorAll("tr");let r="";o.forEach(l=>{const u=l.querySelectorAll("th, td"),h=Array.from(u).map(m=>m.textContent.trim());r+=h.join("	")+`
`}),this.pastedData=r,this.parseImportedData()}}catch(t){console.error("Error processing HTML table:",t),y(C.IMPORT_TABLE_PROCESS_ERROR,"red")}},handleFileUpload(e){const t=e.target.files[0];t&&this.handleFileData(t)},handleFileData(e){e.type==="text/csv"||e.name.endsWith(".csv")?this.parseCSVFile(e):e.type.includes("spreadsheetml")||e.name.endsWith(".xlsx")||e.name.endsWith(".xls")?this.parseExcelFile(e):y(C.IMPORT_UNSUPPORTED_FILE_TYPE,"red")},parseCSVFile(e){const t=new FileReader;t.onload=n=>{this.pastedData=n.target.result,this.parseImportedData()},t.readAsText(e)},async parseExcelFile(e){try{const t=await _(()=>import("./exceljs.min-rgIH9GXZ.js").then(s=>s.e),__vite__mapDeps([0,1])),n=new t.Workbook,i=new FileReader;i.onload=async s=>{const o=s.target.result;await n.xlsx.load(o);const r=n.getWorksheet(1);let l="";r.eachRow((u,h)=>{const m=u.values.slice(1);l+=m.join(",")+`
`}),this.pastedData=l,this.parseImportedData()},i.readAsArrayBuffer(e)}catch(t){console.error("Error parsing Excel file:",t),y(C.IMPORT_EXCEL_PROCESS_ERROR,"red")}},parseImportedData(){if(!this.pastedData.trim()){this.parsedData=[];return}try{const e=this.pastedData.trim().split(/\r?\n/).filter(o=>o.trim());if(e.length<2){y(C.IMPORT_BAD_DATA_FORMAT,"orange");return}const t=o=>{const r=[];let l="",u=!1;for(let h=0;h<o.length;h++){const m=o[h];m==='"'?u&&h<o.length-1&&o[h+1]==='"'?(l+='"',h++):u=!u:(m===","||m==="	"||m===";")&&!u?(r.push(l.trim()),l=""):l+=m}return r.push(l.trim()),r},n=e.map(t),i=n[0].slice(1),s=n.slice(1);this.parsedData=s.map(o=>{const r=o[0].replace(/^"(.*)"$/,"$1"),l=o.slice(1).map(u=>{const h=u.replace(/^"(.*)"$/,"$1").toUpperCase().trim();return["D","N","D N","DN"].includes(h)?h==="DN"?"D N":h:""});return{name:r,shifts:l}}),this.parsedData=this.parsedData.filter(o=>o.name),this.daysMismatch=i.length!==this.monthDays.length}catch(e){console.error("Error parsing imported data:",e),y(C.IMPORT_DATA_PROCESS_ERROR,"red"),this.parsedData=[]}},confirmImport(){if(!this.parsedData.length)return;const e=new Set;this.parsedData.forEach(t=>{const n=this.people.find(i=>i.name.toLowerCase()===t.name.toLowerCase());if(!n){y(C.IMPORT_PERSON_NOT_FOUND.replace("${row.name}",t.name),"orange");return}t.shifts.forEach((i,s)=>{if(s<this.monthDays.length){const o=this.monthDays[s],r=o.date.toDateString();i&&(o.dayShift1===n.id&&(o.dayShift1=null),o.dayShift2===n.id&&(o.dayShift2=null),o.nightShift1===n.id&&(o.nightShift1=null),o.nightShift2===n.id&&(o.nightShift2=null),i.includes("D")&&(o.dayShift1?o.dayShift2||(o.dayShift2=n.id,o.dayShift2Name=n.name):(o.dayShift1=n.id,o.dayShift1Name=n.name)),i.includes("N")&&(o.nightShift1?o.nightShift2||(o.nightShift2=n.id,o.nightShift2Name=n.name):(o.nightShift1=n.id,o.nightShift1Name=n.name)),e.add(r),this.importedCells.add(`${n.id}-${o.date.getDate()}`))}})}),e.forEach(t=>{const n=this.monthDays.find(i=>i.date.toDateString()===t);if(n){const i={dayShift1:n.dayShift1,dayShift2:n.dayShift2,nightShift1:n.nightShift1,nightShift2:n.nightShift2};localStorage.setItem(t,JSON.stringify(i))}}),this.closeImportModal(),y(C.IMPORT_SUCCESS,"green"),this.$emit("has-changes",!0),this.$emit("cells-imported",Array.from(this.importedCells))}}},Ie=["disabled"],Te={key:0,class:"import-modal"},Ae={class:"import-modal-content"},Re={class:"import-modal-header"},Oe={class:"import-content"},Fe={key:0,class:"drop-zone-placeholder"},Le={key:0,class:"preview-section"},Ne={key:0,class:"warning-message"},Be={class:"preview-table-container"},ze={class:"preview-table"},Ue={class:"controls"},Ve={class:"modal-footer"},We=["disabled"];function He(e,t,n,i,s,o){return p(),f(O,null,[a("button",{class:"top-right-buttons import-button",onClick:t[0]||(t[0]=(...r)=>o.showImportModal&&o.showImportModal(...r)),disabled:!n.isEditingMode,title:"Importuj dane do CSV lub Excel","aria-label":"Importuj dane do CSV lub Excel"},t[11]||(t[11]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"22",height:"22",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 14v5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5M12 3v12M7 8l5-5 5 5"})],-1)]),8,Ie),s.showModal?(p(),f("div",Te,[a("div",Ae,[a("div",Re,[t[12]||(t[12]=a("h3",null,"Importowanie Danych",-1)),a("button",{class:"close-button",onClick:t[1]||(t[1]=(...r)=>o.closeImportModal&&o.closeImportModal(...r))},"×")]),a("div",Oe,[a("div",{class:x(["drop-zone",{"drag-active":s.isDragging,"has-data":s.parsedData.length>0}]),onDragover:t[3]||(t[3]=z((...r)=>o.onDragOver&&o.onDragOver(...r),["prevent"])),onDragleave:t[4]||(t[4]=z((...r)=>o.onDragLeave&&o.onDragLeave(...r),["prevent"])),onDrop:t[5]||(t[5]=z((...r)=>o.onDrop&&o.onDrop(...r),["prevent"])),onPaste:t[6]||(t[6]=(...r)=>o.onPaste&&o.onPaste(...r)),onClick:t[7]||(t[7]=(...r)=>o.triggerFileInput&&o.triggerFileInput(...r)),tabindex:"0",ref:"dropZone"},[s.parsedData.length===0?(p(),f("div",Fe,t[13]||(t[13]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"gray","stroke-width":"2"},[a("path",{d:"M19 13v6a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-6M12 3v12M8 7l4-4 4 4"})],-1),a("p",null," Przeciągnij i upuść plik, wklej ze schowka, bądź kliknij aby wybrać plik ",-1),a("p",{class:"sub-text"}," Wspierane formaty: CSV, Excel ( xlsx, xls ) albo tabela ",-1)]))):k("",!0),a("input",{type:"file",ref:"fileInput",style:{display:"none"},onChange:t[2]||(t[2]=(...r)=>o.handleFileUpload&&o.handleFileUpload(...r)),accept:".csv,.xlsx,.xls"},null,544)],34),s.parsedData.length>0?(p(),f("div",Le,[t[15]||(t[15]=a("h4",null,"Podgląd importowanego miesiąca",-1)),s.daysMismatch?(p(),f("div",Ne," Uwaga: Importowany miesiąc ma "+b(s.parsedData[0].shifts.length)+" dni, a obecnie wybrany ma "+b(o.daysInMonth)+" dni. ",1)):k("",!0),a("div",Be,[a("table",ze,[a("thead",null,[a("tr",null,[t[14]||(t[14]=a("th",null,null,-1)),(p(!0),f(O,null,U(s.parsedData[0].shifts,(r,l)=>(p(),f("th",{key:`header-${l}`},b(l+1),1))),128))])]),a("tbody",null,[(p(!0),f(O,null,U(s.parsedData,(r,l)=>(p(),f("tr",{key:`row-${l}`},[a("td",null,b(r.name),1),(p(!0),f(O,null,U(r.shifts,(u,h)=>(p(),f("td",{key:`cell-${l}-${h}`,class:"imported-shift"},b(u),1))),128))]))),128))])])]),a("div",Ue,[a("button",{class:"reset-button",onClick:t[8]||(t[8]=(...r)=>o.resetImport&&o.resetImport(...r))},"Reset")])])):k("",!0),a("div",Ve,[a("button",{class:"cancel-button",onClick:t[9]||(t[9]=(...r)=>o.closeImportModal&&o.closeImportModal(...r))}," Anuluj "),a("button",{class:"import-confirm-button",onClick:t[10]||(t[10]=(...r)=>o.confirmImport&&o.confirmImport(...r)),disabled:!s.parsedData.length}," Importuj ",8,We)])])])])):k("",!0)],64)}const Z=P(xe,[["render",He],["__scopeId","data-v-f4beeb6d"]]),Ge={name:"MonthSelector",props:{currentMonth:{type:Number,required:!0},currentYear:{type:Number,required:!0},locale:{type:String,default:"pl"},hasUnsavedChanges:{type:Boolean,default:!1}},data(){return{isChanging:!1,MESSAGES:C}},computed:{formattedMonthYear(){return new Date(this.currentYear,this.currentMonth).toLocaleString(this.locale,{month:"long",year:"numeric"}).toUpperCase()}},mounted(){document.addEventListener("keydown",this.handleKeyDown)},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{handleKeyDown(e){const t=document.activeElement;if(!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)))switch(e.key){case"ArrowLeft":case"<":e.preventDefault(),this.handleMonthChange(-1);break;case"ArrowRight":case">":e.preventDefault(),this.handleMonthChange(1);break;case"PageUp":e.preventDefault(),this.handleMonthChange(-1);break;case"PageDown":e.preventDefault(),this.handleMonthChange(1);break;case"ArrowUp":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.handleMonthChange(12));break;case"ArrowDown":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.handleMonthChange(-12));break}},handleMonthChange(e){if(this.hasUnsavedChanges){if(!confirm(C.MONTH_CHANGE_UNSAVED))return;this.$emit("discard-changes")}this.isChanging=!0,setTimeout(()=>{this.isChanging=!1},300),this.$emit("change-month",e)}}},Ye={class:"monthChange"},je=["aria-label","title"],Xe=["aria-label","title"];function qe(e,t,n,i,s,o){return p(),f("section",Ye,[a("button",{class:"buttonMonthChange prev-month",onClick:t[0]||(t[0]=r=>o.handleMonthChange(-1)),"aria-label":s.MESSAGES.MONTH_PREVIOUS,title:s.MESSAGES.MONTH_PREVIOUS_GO_TO}," ‹ ",8,je),a("span",{class:x({changing:s.isChanging}),role:"heading","aria-level":"2"},b(o.formattedMonthYear),3),a("button",{class:"buttonMonthChange next-month",onClick:t[1]||(t[1]=r=>o.handleMonthChange(1)),"aria-label":s.MESSAGES.MONTH_NEXT,title:s.MESSAGES.MONTH_NEXT_GO_TO}," › ",8,Xe)])}const J=P(Ge,[["render",qe],["__scopeId","data-v-75358653"]]),Ke=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),$e=j({name:"ButtonsTopBar",components:{ButtonSwitchView:X,PencilIcon:q,RefreshIcon:K,ButtonExport:$,ButtonImport:Z,MonthSelector:J},props:{canSave:Boolean,currentComponent:String,currentMonth:Number,currentYear:Number,locale:String,hasUnsavedChanges:Boolean,isEditingMode:Boolean,isRefreshing:Boolean,people:Array,monthDays:Array},data(){return{isMenuOpen:!1,isMobileView:!1,MESSAGES:C}},methods:{checkMobileView(){this.isMobileView=window.innerWidth<=768,this.isMobileView||(this.isMenuOpen=!1)}},mounted(){this.checkMobileView(),window.addEventListener("resize",this.checkMobileView)},beforeUnmount(){window.removeEventListener("resize",this.checkMobileView)}}),Ze={class:"buttons-top-bar"},Je={class:"fixed-buttons"},Qe=["aria-expanded"],et=["aria-label","title"],tt=["title"],nt=["checked","aria-label"];function ot(e,t,n,i,s,o){const r=M("MonthSelector"),l=M("ButtonSwitchView"),u=M("refresh-icon"),h=M("PencilIcon"),m=M("ButtonExport"),E=M("ButtonImport");return p(),f("nav",Ze,[a("div",Je,[e.isMobileView?(p(),f("button",{key:0,class:x(["hamburger-menu",{"is-open":e.isMenuOpen}]),onClick:t[0]||(t[0]=c=>e.isMenuOpen=!e.isMenuOpen),"aria-expanded":e.isMenuOpen,"aria-label":"Menu"},t[8]||(t[8]=[a("span",null,null,-1),a("span",null,null,-1),a("span",null,null,-1)]),10,Qe)):k("",!0),v(r,{currentMonth:e.currentMonth,currentYear:e.currentYear,locale:e.locale,hasUnsavedChanges:e.hasUnsavedChanges,onChangeMonth:t[1]||(t[1]=c=>e.$emit("change-month",c)),onDiscardChanges:t[2]||(t[2]=c=>e.$emit("discard-changes"))},null,8,["currentMonth","currentYear","locale","hasUnsavedChanges"])]),a("div",{class:x(["collapsible-buttons",{"menu-open":e.isMenuOpen&&e.isMobileView,"mobile-view":e.isMobileView,"desktop-view":!e.isMobileView}])},[v(l,{currentComponent:e.currentComponent,onNavigate:t[3]||(t[3]=c=>e.$emit("navigate",c))},null,8,["currentComponent"]),a("div",{class:x(["right-buttons",{"mobile-view":e.isMobileView}])},[a("button",{class:"top-right-buttons buttonRefresh",onClick:t[4]||(t[4]=c=>e.$emit("refresh")),"aria-label":e.MESSAGES.REFRESH,title:e.MESSAGES.REFRESH},[v(u,{class:x({refreshing:e.isRefreshing})},null,8,["class"])],8,et),a("label",{class:"top-right-buttons compact-toggle",title:e.MESSAGES.CLICK_TO_EDIT},[a("input",{type:"checkbox",checked:e.isEditingMode,onChange:t[5]||(t[5]=c=>e.$emit("toggle-edit",c.target.checked)),"aria-label":e.MESSAGES.CLICK_TO_EDIT},null,40,nt),v(h,{isEditing:e.isEditingMode},null,8,["isEditing"])],8,tt),v(m,Q(e.$attrs,{people:e.people,monthDays:e.monthDays,selectedMonth:e.currentMonth,selectedYear:e.currentYear,"current-page":e.currentComponent}),null,16,["people","monthDays","selectedMonth","selectedYear","current-page"]),v(E,{isEditingMode:e.isEditingMode,people:e.people,monthDays:e.monthDays,onHasChanges:t[6]||(t[6]=c=>e.$emit("has-changes",c)),onCellsImported:t[7]||(t[7]=c=>e.$emit("cells-imported",c))},null,8,["isEditingMode","people","monthDays"])],2)],2)])}const st=P($e,[["render",ot],["__scopeId","data-v-d8c4d7d2"]]),it={name:"SubmitButton",props:{canSave:{type:Boolean,required:!0}},emits:["save"],data(){return{MESSAGES:C}}},rt=["disabled","aria-label","title"];function at(e,t,n,i,s,o){return p(),f("button",{disabled:!n.canSave,onClick:t[0]||(t[0]=r=>e.$emit("save")),class:"submit-button","aria-label":s.MESSAGES.SAVE_CHANGES,title:s.MESSAGES.SAVE_CHANGES},b(s.MESSAGES.SAVE_BUTTON_TEXT),9,rt)}const lt=P(it,[["render",at],["__scopeId","data-v-532d9e26"]]),dt={name:"EditingModeContainer",props:{isEditingMode:{type:Boolean,required:!0},currentPage:{type:String,required:!0}}},ht={class:"editing-mode-container"},ct={class:"editing-mode-label"},ut={class:"editing-mode-label"};function pt(e,t,n,i,s,o){return V((p(),f("div",ht,[V(a("h1",ct,t[0]||(t[0]=[T(" Tryb edytowania "),a("a",{class:"editing-mode-status"},"Włączony",-1),a("br",null,null,-1),T(" Przeciągaj członków zespołu na miejsca w grafiku."),a("br",null,null,-1),T("Kliknij na zajętą zmianę, aby ją wyczyścić. ")]),512),[[W,n.currentPage==="CalendarComponent"]]),V(a("h1",ut,t[1]||(t[1]=[T(" Tryb edytowania "),a("a",{class:"editing-mode-status"},"Włączony",-1),a("br",null,null,-1),T(" Kliknij na miejsce w tabeli, aby wybrać zmianę. ")]),512),[[W,n.currentPage==="ExcelComponent"]])],512)),[[W,n.isEditingMode]])}const mt=P(dt,[["render",pt],["__scopeId","data-v-1669fded"]]),gt={name:"VueCalendar",components:{ButtonsTopBar:st,ButtonSwitchView:X,SubmitButton:lt,MonthSelector:F(()=>_(()=>Promise.resolve().then(()=>Ke),void 0)),PeopleListWindow:F(()=>_(()=>import("./PeopleListWindow-DvqmhoKp.js"),__vite__mapDeps([2,3,4,5,6]))),ShiftCountWindow:F(()=>_(()=>import("./ShiftCountWindow-DeOo7D4t.js"),__vite__mapDeps([7,3,4,5,8]))),NotificationMessage:F(()=>_(()=>import("./utils-oyCVUgbq.js").then(e=>e.d),__vite__mapDeps([3,4,5]))),RefreshIcon:K,ButtonExport:$,ButtonImport:Z,PencilIcon:q,EditingModeContainer:mt},data(){return{isLoading:!1,isEditingMode:this.safeGetFromStorage("isEditingMode",!1),selectedMonth:new Date().getMonth(),selectedYear:new Date().getFullYear(),locale:"pl",hasUnsavedChanges:!1,showPasswordModal:!1,localData:{},people:[{id:1,name:"Milena",ratownik:!1},{id:2,name:"Mikołaj",ratownik:!1},{id:3,name:"Aleksandra",ratownik:!1},{id:4,name:"Łukasz",ratownik:!0},{id:5,name:"Joanna",ratownik:!1},{id:6,name:"Natalia",ratownik:!0},{id:7,name:"Marcin",ratownik:!0}],monthDays:[],isRefreshing:!1,AuthorizationModal:null,CalendarComponent:null,ExcelComponent:null,currentPage:this.safeGetFromStorage("currentPage","ExcelComponent")}},computed:{canSave(){return this.hasUnsavedChanges},peopleListEditingMode(){return this.currentPage==="CalendarComponent"&&this.isEditingMode},activeComponentRef(){return this.currentPage==="CalendarComponent"?this.$refs.calendarComponent:this.$refs.excelComponent}},methods:{showPasswordPrompt(){if(this.AuthorizationModal){this.showPasswordModal=!0;return}_(()=>import("./AuthorizationModal-DTnq-K36.js"),__vite__mapDeps([9,3,4,5,10])).then(e=>{this.AuthorizationModal=G(e.default),this.showPasswordModal=!0})},handleAuthorization(){this.showPasswordModal=!1,this.hasUnsavedChanges=!1},loadPageComponent(e){const n={CalendarComponent:()=>_(()=>import("./CalendarComponent-DUyu9_za.js"),__vite__mapDeps([11,12,3,4,5,13])),ExcelComponent:()=>_(()=>import("./ExcelComponent-DGZJL5KH.js"),__vite__mapDeps([14,12,3,4,5,15]))}[e];return!n||this[e]?Promise.resolve():(this.isLoading=!0,n().then(i=>{this[e]=G(i.default)}).finally(()=>{this.isLoading=!1}))},handleNavigation(e){this.hasUnsavedChanges&&!confirm("Masz niezapisane zmiany. Czy na pewno chcesz zmienić widok?")||(localStorage.setItem("currentPage",e),this.loadPageComponent(e).then(()=>{this.currentPage=e,this.hasUnsavedChanges=!1}))},handleMonthChange(e){const t=new Date(this.selectedYear,this.selectedMonth,1);t.setMonth(t.getMonth()+e),this.selectedMonth=t.getMonth(),this.selectedYear=t.getFullYear()},discardChanges(){this.hasUnsavedChanges=!1,this.checkShiftDataSync()},generateCurrentView(){this.currentPage==="CalendarComponent"&&this.$refs.calendarComponent&&this.$refs.calendarComponent.generateMonthDays()},async checkShiftDataSync(){const e=new Error("Sync timeout");this.isRefreshing=!0;try{await Promise.race([ne(()=>this.activeComponentRef?.generateMonthDays()),new Promise((t,n)=>setTimeout(()=>n(e),5e3))]),this.hasUnsavedChanges=!1}catch(t){console.error(t),y(`Błąd podczas odświeżania: ${t.message}`,"red")}finally{setTimeout(()=>this.isRefreshing=!1,800)}},updateEditingMode(e){this.isEditingMode=e,localStorage.setItem("isEditingMode",JSON.stringify(e))},updateUnsavedChanges(e){this.hasUnsavedChanges=e},emitEditingMode(e){this.updateEditingMode(e)},enableEditingMode(){this.isEditingMode=!0},updateMonthDays(e){this.monthDays=e},globalErrorHandler(){this.isRefreshing=!1,this.currentPage==="ExcelComponent"&&!this.$refs.excelComponent&&this.handleNavigation("ExcelComponent"),this.isLoading=!1},safeGetFromStorage(e,t){try{const n=localStorage.getItem(e);return n===null?t:e==="currentPage"?n:JSON.parse(n)}catch(n){return console.warn(`Error reading ${e} from localStorage:`,n),t}},handleImportedCells(e){if(!this.ExcelComponent){console.error("ExcelComponent is not loaded yet.");return}this.$refs.excelComponent.importedCells=new Set(e)}},async mounted(){try{this.isRefreshing=!1,await this.loadPageComponent("ExcelComponent").catch(t=>{console.error("Failed to load Excel component:",t),y("Błąd ładowania Tabeli","red")}),localStorage.getItem("currentPage")==="CalendarComponent"&&await this.loadPageComponent("CalendarComponent").catch(t=>{console.error("Failed to load Calendar component:",t),y("Błąd ładowania Kalendarza","red"),this.currentPage="ExcelComponent",localStorage.setItem("currentPage","ExcelComponent")}),this.discardChanges(),this.hasUnsavedChanges=!1}catch(e){console.error("Error during application initialization:",e),y("Błąd inicjalizacji aplikacji","red")}["error","unhandledrejection"].forEach(e=>window.addEventListener(e,()=>this.globalErrorHandler()))}},ft={class:"app-container"},Et={class:"main-content"},wt={key:0,class:"refresh-overlay"};function yt(e,t,n,i,s,o){const r=M("SubmitButton"),l=M("ButtonsTopBar"),u=M("RefreshIcon"),h=M("PeopleListWindow"),m=M("EditingModeContainer"),E=M("ShiftCountWindow"),c=M("NotificationMessage");return p(),f(O,null,[a("div",ft,[s.AuthorizationModal&&s.showPasswordModal?(p(),L(H(s.AuthorizationModal),{key:0,show:s.showPasswordModal,onClose:t[0]||(t[0]=D=>s.showPasswordModal=!1),onAuthorized:o.handleAuthorization,"aria-label":"Zapisz zmiany",title:"Zapisz zmiany w harmonogramie",mode:"save"},null,40,["show","onAuthorized"])):k("",!0),v(r,{canSave:o.canSave,onSave:o.showPasswordPrompt},null,8,["canSave","onSave"]),v(l,{canSave:o.canSave,currentComponent:s.currentPage,currentMonth:s.selectedMonth,currentYear:s.selectedYear,locale:s.locale,hasUnsavedChanges:s.hasUnsavedChanges,isEditingMode:s.isEditingMode,isRefreshing:s.isRefreshing,people:s.people,monthDays:s.monthDays,onSave:o.showPasswordPrompt,onNavigate:o.handleNavigation,onChangeMonth:o.handleMonthChange,onDiscardChanges:o.discardChanges,onRefresh:o.checkShiftDataSync,onToggleEdit:o.emitEditingMode,onHasChanges:o.updateUnsavedChanges,onCellsImported:o.handleImportedCells},null,8,["canSave","currentComponent","currentMonth","currentYear","locale","hasUnsavedChanges","isEditingMode","isRefreshing","people","monthDays","onSave","onNavigate","onChangeMonth","onDiscardChanges","onRefresh","onToggleEdit","onHasChanges","onCellsImported"]),a("main",Et,[s.isRefreshing?(p(),f("div",wt,[v(u,{class:"centered-refresh-icon refreshing"})])):k("",!0),a("div",{class:"component-wrapper",style:ee({opacity:s.isRefreshing?"0.5":"1"})},[s.currentPage==="CalendarComponent"?(p(),L(H(s.CalendarComponent),{key:0,ref:"calendarComponent",isEditingMode:s.isEditingMode,selectedMonth:s.selectedMonth,selectedYear:s.selectedYear,people:s.people,onUpdateEditingMode:o.updateEditingMode,onHasChanges:o.updateUnsavedChanges,onMonthDaysUpdated:o.updateMonthDays},null,40,["isEditingMode","selectedMonth","selectedYear","people","onUpdateEditingMode","onHasChanges","onMonthDaysUpdated"])):k("",!0),s.currentPage==="ExcelComponent"?(p(),L(H(s.ExcelComponent),{key:1,ref:"excelComponent",isEditingMode:s.isEditingMode,selectedMonth:s.selectedMonth,selectedYear:s.selectedYear,people:s.people,onUpdateEditingMode:o.updateEditingMode,onHasChanges:o.updateUnsavedChanges,onMonthDaysUpdated:o.updateMonthDays},null,40,["isEditingMode","selectedMonth","selectedYear","people","onUpdateEditingMode","onHasChanges","onMonthDaysUpdated"])):k("",!0)],4),v(h,{people:s.people,isEditingMode:o.peopleListEditingMode},null,8,["people","isEditingMode"]),v(m,{isEditingMode:s.isEditingMode,currentPage:s.currentPage},null,8,["isEditingMode","currentPage"]),s.monthDays.length>0&&s.localData[1]!==null?(p(),L(E,{key:1,ref:"shiftCountWindow",people:s.people,monthDays:s.monthDays},null,8,["people","monthDays"])):k("",!0),v(c)])]),t[1]||(t[1]=a("footer",{class:"footer"},[a("a",{href:"https://github.com/puksh/kalendar"},"© 2025 puksh - All rights reserved")],-1))],64)}const St=P(gt,[["render",yt],["__scopeId","data-v-2cffa323"]]);window.addEventListener("error",e=>{e.error&&(e.error.message.includes("Failed to fetch dynamically imported module")||e.error.message.includes("Importing a module script failed"))&&window.location.reload()});te(St).mount("#app");"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.log("Service Worker registration failed:",e)})});export{_,Me as g,A as i};
