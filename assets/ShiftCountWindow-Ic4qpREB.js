const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthorizationModal-C82brlNJ.js","assets/utils-CaNMbjBs.js","assets/vue-vendor-DhtqVHvN.js","assets/utils-DPnYpszc.css","assets/AuthorizationModal-Cx-L6xD7.css"])))=>i.map(i=>d[i]);
import{_ as m}from"./index-Bp_Ov_9c.js";import{M as d,_ as A}from"./utils-CaNMbjBs.js";import{c as h,o as n,d as e,l as S,g as u,t as o,b as c,n as f,p as w,T as g,F as _,a as y}from"./vue-vendor-DhtqVHvN.js";const E={name:"ShiftCountWindow",props:{people:{type:Array,required:!0},monthDays:{type:Array,required:!0}},data(){return{showSalaries:!1,showPasswordModal:!1,AuthorizationModal:null,salaryRates:{ratownik:90,nurse:97},MESSAGES:d}},async mounted(){this.calculateAllShiftCounts();try{const s=await m(()=>import("./AuthorizationModal-C82brlNJ.js"),__vite__mapDeps([0,1,2,3,4]));this.AuthorizationModal=s.default}catch(s){console.error("Failed to load AuthorizationModal:",s)}},methods:{countShiftsForPerson(s){if(!s)return 0;let r=0;for(let a=0;a<this.monthDays.length;a++)this.monthDays[a].dayShift1===s&&(r+=1),this.monthDays[a].dayShift2===s&&(r+=1),this.monthDays[a].nightShift1===s&&(r+=1),this.monthDays[a].nightShift2===s&&(r+=1);return r},calculateAllShiftCounts(){this.people.forEach(s=>{s.shiftCount=this.countShiftsForPerson(s.id)})},calculateNetto(s,r){if(!this.showSalaries)return 0;let a=0;return r?a=s*12*this.salaryRates.ratownik:a=s*12*this.salaryRates.nurse,a},getTotalSalary(s){return this.people.filter(r=>r.ratownik===s).reduce((r,a)=>r+this.calculateNetto(a.shiftCount||0,s),0)},formatCurrency(s){return new Intl.NumberFormat("pl-PL",{minimumFractionDigits:0,maximumFractionDigits:2}).format(s)},toggleSalaryView(){this.showSalaries?this.showSalaries=!1:this.showPasswordModal=!0},handleSalaryAuthorization(){this.showSalaries=!0,this.showPasswordModal=!1}},watch:{monthDays:{handler(){this.calculateAllShiftCounts()},deep:!0}}},C={style:{margin:"8px"}},M={class:"columns-container"},T={class:"column"},p={style:{margin:"8px",display:"inline-flex","align-items":"center",gap:"4px"}},L={key:0,style:{color:"var(--color-success) !important"}},k={class:"shift-counts"},R={key:0,class:"salary-info"},x={class:"column"},z={style:{margin:"8px",display:"inline-flex","align-items":"center",gap:"4px"}},v={key:0,style:{color:"var(--color-success) !important"}},N={class:"shift-counts"},D={key:0,class:"salary-info"},P={key:0,class:"salary-summary"},G={class:"total-all"};function O(s,r,a,Y,t,i){return n(),h("section",{class:f(["shift-counts-window",{"show-salaries":t.showSalaries}])},[e("h3",C,o(t.MESSAGES.SHIFT_COUNT_TITLE),1),e("button",{onClick:r[0]||(r[0]=(...l)=>i.toggleSalaryView&&i.toggleSalaryView(...l)),class:f(["salary-toggle-btn",{active:t.showSalaries}])},[r[2]||(r[2]=e("svg",{class:"dollar-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("rect",{x:"2",y:"7",width:"20",height:"10",rx:"2",stroke:"currentColor","stroke-width":"2"}),e("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"}),e("path",{d:"M12 10.5V13.5M10.5 12H13.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),c(" "+o(t.showSalaries?t.MESSAGES.SALARY_HIDE:t.MESSAGES.SALARY_SHOW),1)],2),(n(),S(g,{to:"body"},[t.AuthorizationModal&&t.showPasswordModal?(n(),S(w(t.AuthorizationModal),{key:0,show:t.showPasswordModal,onClose:r[1]||(r[1]=l=>t.showPasswordModal=!1),onAuthorized:i.handleSalaryAuthorization,"aria-label":t.MESSAGES.AUTH_SALARY_ACCESS_ARIA,title:t.MESSAGES.AUTH_SALARY_ACCESS_TITLE,mode:"salary"},null,40,["show","onAuthorized","aria-label","title"])):u("",!0)])),e("div",M,[e("div",T,[e("h4",p,[c(o(t.MESSAGES.ROLE_RATOWNIK_PLURAL)+" ",1),t.showSalaries?(n(),h("p",L," | "+o(t.salaryRates.ratownik)+" / godz. ",1)):u("",!0)]),e("ul",k,[(n(!0),h(_,null,y(a.people.filter(l=>l.ratownik),l=>(n(),h("li",{key:l.id,class:"shift-count-item"},[c(o(l.name)+": ",1),e("strong",null,o(l.shiftCount||0),1),t.showSalaries?(n(),h("span",R," | "+o(i.formatCurrency(i.calculateNetto(l.shiftCount||0,!0)))+" zł netto ",1)):u("",!0)]))),128))])]),e("div",x,[e("h4",z,[c(o(t.MESSAGES.ROLE_NURSE_PLURAL)+" ",1),t.showSalaries?(n(),h("p",v," | "+o(t.salaryRates.nurse)+" / godz. ",1)):u("",!0)]),e("ul",N,[(n(!0),h(_,null,y(a.people.filter(l=>!l.ratownik),l=>(n(),h("li",{key:l.id,class:"shift-count-item"},[c(o(l.name)+": ",1),e("strong",null,o(l.shiftCount||0),1),t.showSalaries?(n(),h("span",D," | "+o(i.formatCurrency(i.calculateNetto(l.shiftCount||0,!1)))+" zł netto ",1)):u("",!0)]))),128))])])]),t.showSalaries?(n(),h("div",P,[e("h4",null,o(t.MESSAGES.SALARY_SUMMARY_MONTHLY),1),e("p",null,[e("strong",null,o(t.MESSAGES.SALARY_TOTAL_RATOWNIK)+" "+o(i.formatCurrency(i.getTotalSalary(!0)))+" zł netto",1)]),e("p",null,[e("strong",null,o(t.MESSAGES.SALARY_TOTAL_NURSE)+" "+o(i.formatCurrency(i.getTotalSalary(!1)))+" zł netto",1)]),e("p",G,[e("strong",null,o(t.MESSAGES.SALARY_TOTAL_ALL)+" "+o(i.formatCurrency(i.getTotalSalary(!0)+i.getTotalSalary(!1)))+" zł netto",1)])])):u("",!0)],2)}const b=A(E,[["render",O],["__scopeId","data-v-476dd815"]]);export{b as default};
