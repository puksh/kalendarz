import{M as r,a as h}from"./utils-DxxLyD3D.js";const w=["Nd","Pon","Wt","Åšr","Czw","Pt","Sob"];function A(t){const n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function k(t,n){const e=new Date(t,n+1,0).getDate(),o=[];for(let i=1;i<=e;i++)o.push({date:new Date(t,n,i),dayShift1:null,dayShift2:null,nightShift1:null,nightShift2:null,dayShift1Name:r.NOT_ASSIGNED,dayShift2Name:r.NOT_ASSIGNED,nightShift1Name:r.NOT_ASSIGNED,nightShift2Name:r.NOT_ASSIGNED,isCurrentMonth:!0});return o}function g(t,n){const e=n.find(o=>o.id===t);return e?{name:e.name,isRatownik:e.ratownik}:{name:r.NOT_ASSIGNED,isRatownik:!1}}const u=["dayShift1","dayShift2","nightShift1","nightShift2"];function O(t){const n=t.date.toDateString(),e={dayShift1:t.dayShift1,dayShift2:t.dayShift2,nightShift1:t.nightShift1,nightShift2:t.nightShift2};sessionStorage.setItem(n,JSON.stringify(e))}function d(t,n,e,o,i){const a=new Date(t,n,e).toDateString(),l=sessionStorage.getItem(a);if(l)try{const c=JSON.parse(l),f=o.find(s=>s.date.toDateString()===a);f&&u.forEach(s=>{f[s]=c[s];const S=g(f[s],i);f[s+"Name"]=S.name,f[s+"Ratownik"]=S.isRatownik,f[s+"UserChanged"]=c[s+"UserChanged"]??!1})}catch(c){console.error("Failed to load local data:",c)}}function _(t,n,e,o){for(let a=1;a<=31;a++)d(t,n,a,e,o)}function C(){const t=[];for(const n in sessionStorage)if(sessionStorage.hasOwnProperty(n))try{const e=JSON.parse(sessionStorage.getItem(n)||"{}");u.some(i=>e[i+"UserChanged"])&&t.push(n)}catch{continue}t.forEach(n=>sessionStorage.removeItem(n))}function R(t,n,e,o){return m(t,n,e.id)?e.ratownik&&N(t,n,o)?(h(r.TWO_RATOWNIK_ERROR,"red"),!1):!0:(h(r.DUPLICATE_SHIFT,"red"),!1)}function m(t,n,e){return n.includes("day")?t.dayShift1!==e&&t.dayShift2!==e:n.includes("night")?t.nightShift1!==e&&t.nightShift2!==e:!0}function N(t,n,e){let o=[];return n.includes("day")&&(o=[t.dayShift1,t.dayShift2].filter(Boolean)),n.includes("night")&&(o=[t.nightShift1,t.nightShift2].filter(Boolean)),o.some(i=>!!e.find(l=>l.id===i)?.ratownik)}function E(t,n,e){t[n]=e.id,t[`${n}Name`]=e.name,t[`${n}Ratownik`]=e.ratownik,t[`${n}UserChanged`]=!0}function I(t,n){t[n]=null,t[`${n}Name`]=r.NOT_ASSIGNED,t[`${n}Ratownik`]=null,t[`${n}UserChanged`]=!0}function M(t,n){if(!n)return;t.preventDefault();const e=t.deltaY;n.scrollLeft+=e}function P(t,n,e,o){if(!t)return;const i=new Date;if(i.getMonth()!==n||i.getFullYear()!==e)return;const a=document.querySelector(".day-cell, .calendar-table td")?.offsetWidth||0,l=t.offsetWidth,c=a*o-l/2+a/2;t.scrollTo({left:Math.max(0,c),behavior:"smooth"})}export{E as a,P as b,C as c,w as d,I as e,k as g,M as h,A as i,_ as l,O as s,R as v};
